<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    function SvgAnimation(fillColor,strokeColor,strokeWidth,duration,animationMode){
      this.strokeColor=strokeColor; //笔画颜色
      this.fillColor=fillColor; //填充颜色
      this.strokeWidth=strokeWidth;//描边宽度
      this.duration=duration;//动画时间
      this.animationMode=animationMode;//动画模式
    }

    function getPathLength(select){ //获取路径的长度
      var obj=document.querySelectorAll(select);
      var array=new Array();
      for(var i=0;i<obj.length;i++){
        console.log(obj[i].getTotalLength());
        array[i]=obj[i].getTotalLength();
      }
      return array;
    }
    SvgAnimation.prototype.load=function(PathDom,fn){ //传入执行函数和dom节点
      fn(PathDom,this.fillColor,this.strokeColor,this.strokeWidth,this.duration,this.animationMode);
    }

    function CreatKeyFrame(PathDom,fillColor,strokeColor,strokeWidth,duration,animationMode){ //创建css3逐帧动画
      var stylesheet = document.createElement('style');
          stylesheet.type = 'text/css';

      var array=getPathLength('path'); //获取路径长度数组
      var content='';
      for(var i=0;i<array.length;i++){
        content+=PathDom+`:nth-child(`+(i+1)+`){
                  fill:`+fillColor+`;
                  stroke-width:`+strokeWidth+`px;
                  stroke-dasharray:`+array[i]+`;
                  animation:dash`+i+` `+duration+`s `+animationMode+`;
                  stroke-width: `+strokeWidth+`px;
                  stroke: `+strokeColor+`;
                }
                @keyframes dash`+i+`{
                  0%{
                    stroke-dashoffset: `+array[i]+`;
                    fill-opacity: 0;
                  }  
                  50%{
                    stroke-dashoffset:0;
                  }
                  100%{
                    fill-opacity: 1;
                  }
                }`;                                                          
      }
      stylesheet.innerHTML=content;
      document.getElementsByTagName('HEAD')[0].appendChild(stylesheet);

      
    }
    window.onload=function(){
       var svg=new SvgAnimation('#fff','black',0.5,6,'forwards'); 
       svg.load('#demo path',CreatKeyFrame);
    }
  </script>
  <style>

  </style>
</head>
<body>
  <svg version="1.1" id="demo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 500 200" style="enable-background:new 0 0 500 200;" xml:space="preserve">
    <path d="M247.2,71.6c-0.3,6-0.6,12-0.9,18c-0.5,11.9-1,23.9-1.4,35.8c-0.1,2.2,0.2,4.5,0.5,6.7c0.7,5,3.1,7.6,8.3,8.8
      c1.7,0.4,3.5,0.6,5.4,0.9c0,0.5,0,1.1,0,1.8c-11,0-22.1,0-33.2,0c0-0.6,0-1.2,0-1.8c1.7-0.3,3.4-0.5,5-0.9c4.2-0.9,6.8-3.4,7.4-7.7
      c1-7.2,2-14.3,2.6-21.5c0.9-9,1.5-18.1,2.1-27.1c0.3-5.4,0.5-10.8,0.3-16.2c-0.1-4.8-2.1-7-6.8-8.1c-1.9-0.5-3.8-0.8-5.8-1.1
      c0-0.5,0-1.1,0-1.8c0.5,0,0.9-0.1,1.4-0.1c5,0,9.9,0,14.9,0c1,0,1.5,0.3,1.9,1.2c11.7,23.5,23.3,46.9,35,70.4
      c0.2,0.5,0.5,0.9,0.8,1.5c0.4-0.8,0.8-1.5,1.1-2.2c11.6-23.2,23.2-46.4,34.8-69.7c0.4-0.9,0.9-1.2,1.9-1.2c5.8,0,11.5,0,17.3,0
      c0.4,0,0.9,0,1.4,0c0,0.7,0,1.2,0,1.9c-1.9,0.3-3.9,0.5-5.9,0.9c-5.7,1-7.6,3.3-7.7,9.1c0,4.5,0.1,9,0.2,13.5
      c0.1,6.6,0.2,13.3,0.4,19.9c0.2,9,0.4,18,0.6,27c0.1,1.9,0.4,3.7,0.7,5.6c0.5,2.7,2.2,4.6,4.9,5.2c2.4,0.6,4.8,0.9,7.2,1.3
      c0.3,0,0.5,0.1,0.9,0.1c0,0.6,0,1.2,0,1.9c-11.3,0-22.5,0-33.8,0c0-0.6,0-1.2,0-1.8c2-0.3,4-0.5,5.9-0.9c4.1-0.8,5.9-2.8,6.2-7.1
      c0.2-4,0.3-8,0.3-12c0-7-0.2-13.9-0.2-20.9c-0.1-11.1-0.2-22.2-0.3-33.3c0-0.3,0-0.5-0.3-0.9c-0.3,0.4-0.5,0.7-0.7,1.1
      c-4.9,9.9-9.8,19.8-14.7,29.7c-7.2,14.5-14.4,29-21.5,43.5c-0.3,0.5-0.4,1.4-1.3,1.1c-0.5-0.2-0.9-0.6-1.2-1.1
      c-10.4-21.7-20.8-43.3-31.2-65c-0.7-1.5-1.4-3-2.2-4.5C247.4,71.5,247.3,71.5,247.2,71.6z"/>
    <path d="M49.2,59.2c0-0.6,0-1.2,0-1.9c0.5,0,0.9,0,1.3,0c13.9,0,27.8-0.1,41.8,0c7.8,0.1,15.6,0.8,23,3.4
      c12,4.1,19.5,12.5,22.5,24.7c2.6,11,1.8,21.8-3.1,32.2c-3.8,8.1-10,13.8-17.8,18c-7.2,3.9-15.1,6-23.2,7.1
      c-4.7,0.7-9.4,0.9-14.2,0.9c-10,0-20,0-30,0c-0.5,0-1,0-1.5,0v-1.9c1.9-0.2,3.9-0.4,5.9-0.7c5-0.9,7-2.8,7.4-7.6
      c0.1-1.5,0.2-3,0.2-4.4c0-19.2,0-38.5,0-57.7c0-1.9-0.2-3.8-0.5-5.6c-0.5-3-2.2-4.9-5.2-5.6C53.8,59.8,51.6,59.5,49.2,59.2z
      M68.9,96.3c0,10.4,0,20.9,0,31.3c0,1.5,0.1,3,0.2,4.4c0.4,4.6,2.4,7,7,7.6c13,1.8,25.7,0.3,37.6-6.9c5.1-3.1,9.1-7.7,11.6-13.1
      c6.2-13.5,6.1-26.9,0.4-39.9c-2.8-6.5-7.4-11.7-13.7-15c-4.4-2.3-9.3-3.1-14.2-3.8c-9.1-1.2-18.2-1.1-27.3-0.8
      c-1.2,0-1.7,0.5-1.7,1.6c0,0.4,0,0.9,0,1.3C68.9,74.2,68.9,85.3,68.9,96.3z"/>
    <path d="M400.6,55.1c16.7,0.6,29.7,6.5,38.9,19.7c5,7.2,7.3,15.3,7.3,24c0.1,9.9-2.5,19.1-8.3,27.2c-7.2,10.1-17,16.2-29,18.6
      c-13,2.7-25.3,1-36.6-6.2c-11.7-7.6-18.4-18.5-19.7-32.4c-2.2-24.2,14.1-45.6,38-49.8C394.7,55.6,398.1,55.3,400.6,55.1z M437.5,104
      c-0.2-6.5-0.9-12.3-2.6-17.9c-2.8-9-7.7-16.6-15.8-21.7c-7.7-4.8-16.2-6.5-25.2-5.5c-14.2,1.6-23.9,9.1-28.6,22.6
      c-3.5,9.9-3.3,20.1-0.8,30.2c2.1,8.5,6.2,15.9,12.9,21.7c9.1,7.8,19.8,10.4,31.4,8.4c10.9-1.9,19.2-7.7,24.3-17.6
      C436.6,117.7,437.6,110.6,437.5,104z"/>
    <path d="M151.2,57.3c20,0,40,0,59.8,0c0.4,7.1,0.9,14,1.3,21.1c-0.7,0.1-1.5,0.3-2.3,0.5c-0.3-1.4-0.6-2.8-1-4.2
      c-0.4-1.5-0.9-3.1-1.4-4.6c-1.8-5.3-5.6-8.2-11-8.9c-2.5-0.4-5-0.6-7.5-0.6c-5-0.1-10,0-15,0c-0.6,0-1.1,0-1.7,0.1
      c-0.8,0.1-1.3,0.6-1.4,1.4c-0.1,0.6-0.1,1.1-0.1,1.7c0,10.6,0,21.2,0,31.8c0,0.3,0,0.6,0.1,1c0.1,0.1,0.3,0.1,0.4,0.1
      c7.1-0.1,14.2-0.1,21.2-0.2c1.1,0,2.2-0.3,3.3-0.6c2.4-0.6,4.1-2.2,5.1-4.5c0.5-1.2,1-2.5,1.2-3.7c0.2-1.2,0.8-1.6,1.9-1.4
      c0.2,0,0.5,0,0.8,0.1c0,8.5,0,16.9,0,25.4c-0.2,0-0.3,0.1-0.4,0.1c-1.9,0.1-1.8,0.1-2.3-1.6c-0.3-1.1-0.6-2.2-1-3.3
      c-1.2-3.7-3.8-5.8-7.6-5.9c-7.5-0.3-15-0.3-22.7-0.4c0,0.6-0.1,1-0.1,1.5c0,8.7,0,17.4,0,26c0,1.4,0.1,2.8,0.3,4.2
      c0.7,5,3.1,7.5,8.1,8c7,0.7,14.1,0.7,21-0.4c4.1-0.7,7.6-2.6,10-6.1c2.3-3.2,4.3-6.6,5.8-10.3c0.7-1.9,0.7-1.9,3-1.6
      c-1.6,7.4-3.3,14.7-4.9,22.1c-21.6,0-43,0-64.5,0c0-0.6,0-1.3,0-1.9c2.2-0.3,4.5-0.5,6.7-0.9c4.8-0.9,6.6-3.1,6.9-7.9
      c0.1-1.8,0.2-3.7,0.2-5.5c0-18.4,0-36.8,0-55.2c0-2.3-0.3-4.5-0.6-6.8c-0.5-3.1-2.5-4.9-5.4-5.5c-2.1-0.4-4.2-0.6-6.4-1
      C151.2,58.6,151.2,58,151.2,57.3z"/>
</svg>
</body>
</html>